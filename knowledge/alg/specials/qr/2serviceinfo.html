<!DOCTYPE html>
<html>
	<body>
    	<h1>Служебная информация</h1>
        <div>
            К служебной информации относятся:
            <ol>
                <li>
                    Количество кодируемых данных
                </li>
                <li>
                    Способ кодирования
                </li>
            </ol>
            Для указания количества кодируемых данных необходимо определиться с уровнем коррекции и выбрать номер версии QR кода.
        </div>
    	<p>
            <h2>Уровень коррекции</h2>
            <div>
                Чем выше уровень коррекции, тем меньше информации при равном размере:
                <ol>
                    <li>
                        L - допустимо 7 % повреждений
                    </li>
                    <li>
                        M - допустимо 15 % повреждений
                    </li>
                    <li>
                        Q - допустимо 25 % повреждений
                    </li>
                    <li>
                        H - допустимо 30 % повреждений
                    </li>
                </ol>
                Для QR кодов с рисунками используется уровень H.
            </div>
    	</p>
        <p>
            <h2>Версия QR кода</h2>
            <div>
                Версия определяет размер кода. 
                Номер версии зависит от количества кодируемой информации и от уровня коррекции.
            </div>
            <div>
                Максимальное количество полезной информации вместе со служебной (в битах), 
                которое можно закодировать в QR коде в зависимости от версии:
                <code>&nbsp;|&nbsp; 1|&nbsp; 2|&nbsp; 3|&nbsp; 4|&nbsp; 5|&nbsp;&nbsp; 6|&nbsp;&nbsp; 7|&nbsp;&nbsp; 8|&nbsp;&nbsp; 9|&nbsp; 10|</code>
                <code>L|152|272|440|640|864|1088|1248|1552|1865|2192|</code>
                <code>M|128|224|352|512|688| 864| 992|1232|1456|1728|</code>
                <code>Q|104|176|272|384|496| 608| 704| 880|1056|1232|</code>
                <code>H| 72|128|208|288|368| 480| 528| 688| 800| 976|</code>
                <code>&nbsp;</code>
                <code>&nbsp;|&nbsp; 11|&nbsp; 12|&nbsp; 13|&nbsp; 14|&nbsp; 15|&nbsp; 16|&nbsp; 17|&nbsp; 18|&nbsp; 19|&nbsp; 20|</code>
                <code>L|2592|2960|3424|3688|4184|4712|5176|5768|6360|6888|</code>
                <code>M|2032|2320|2672|2920|3320|3624|4056|4504|5016|5352|</code>
                <code>Q|1440|1648|1952|2088|2360|2600|2936|3176|3560|3880|</code>
                <code>H|1120|1264|1440|1576|1784|2024|2264|2504|2728|3080|</code>
                <code>&nbsp;</code>
                <code>&nbsp;|&nbsp; 21|&nbsp; 22|&nbsp; 23|&nbsp; 24|&nbsp;&nbsp; 25|&nbsp;&nbsp; 26|&nbsp;&nbsp; 27|&nbsp;&nbsp; 28|&nbsp;&nbsp; 29|&nbsp;&nbsp; 30|</code>
                <code>L|7456|8048|8752|9392|10208|10960|11744|12248|13048|13880|</code>
                <code>M|5712|6256|6880|7312| 8000| 8496| 9024| 9544|10136|10984|</code>
                <code>Q|4096|4544|4912|5312| 5744| 6032| 6464| 6968| 7288| 7880|</code>
                <code>H|3248|3536|3712|4112| 4304| 4768| 5024| 5288| 5608| 5960|</code>
                <code>&nbsp;</code>
                <code>&nbsp;|&nbsp;&nbsp; 31|&nbsp;&nbsp; 32|&nbsp;&nbsp; 33|&nbsp;&nbsp; 34|&nbsp;&nbsp; 35|&nbsp;&nbsp; 36|&nbsp;&nbsp; 37|&nbsp;&nbsp; 38|&nbsp;&nbsp; 39|&nbsp;&nbsp; 40|</code>
                <code>L|14744|15640|16568|17528|18448|19472|20528|21616|22496|23648|</code>
                <code>M|11640|12328|13048|13800|14496|15312|15936|16816|17728|18672|</code>
                <code>Q| 8264| 8920| 9368| 9848|10288|10832|11408|12016|12656|13328|</code>
                <code>H| 6344| 6760| 7208| 7688| 7888| 8432| 8768| 9136| 9776|10208|</code>
            </div>
        </p>
        <p>
            <h2>Добавление информации о способе кодирования и количестве данных</h2>
            Перед последовательностью бит, представляющей собой закодированное сообщение добавляются два поля:
            способ кодирования и количество данных.
            <div>
                Способ кодирования - это поле длиной в 4 бита:
                <code>0001 - цифровое кодирование</code>
                <code>0010 - буквенно-цифровое кодирование</code>
                <code>0100 - побайтовое кодирование</code>
            </div>
            <div>
                Количество данных - это количество БИТ кода сообщения, а для побайтового кодирования - количество БАЙТ,
                представленное в виде двоичного числа длины, выбираемой по таблице:
                <code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|Версии 1-9|Версии 10-26|Версии 27-40|</code>
                <code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Цифровое|&nbsp;&nbsp;&nbsp;&nbsp;10 бит|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12 бит|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;14 бит|</code>
                <code>Буквенно-цифровое|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9 бит|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11 бит|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;13 бит|</code>
                <code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Побайтовое|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8 бит|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;16 бит|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;16 бит|</code>
            </div>
            <div>
                Если в результате добавления информации о способе кодирования и количестве данных размер закодированного сообщения превысит
                указанный в таблице версий, то нужно выбрать по таблице версий следующую и добавить служебную информацию заново.
            </div>
            <div>
                Допускается использование смешанного кодирования: несколько групп данных кодируется разными способами, 
                к каждой группе добавляется служебная информация, после чего группы объединяются в одну последовательность.
            </div>
        </p>  
        <p>
            <h2>Пример</h2>   
            После побайтового кодирования получилась строка в 100 байт = 800 бит.
            При уровне коррекции М согласно таблице версий оптимальной является 6 версия.
            По таблице длин полей количества данных длина поля - 8 бит. Тогда
            <code>0100 - способ кодирования</code>
            <code>01100100 - число 100 в двоичном виде (100 байт)</code>
            Итоговая последовательность:
            <code>010001100100кодДанных</code>
        </p>   
        <p>
            <h2>Заполнение</h2>   
            <div>
                Последовательность бит в конце дополняется нулями до количества, кратного 8.
            </div>
            <div>
                После этого биты дополняются в конце чередующимися последовательностями (1 Б):
                <code>11101100</code>
                и
                <code>00010001</code>
                пока длина последовательности полностью не совпадет с длиной из таблицы версий.
            </div>
        </p>         
	</body>
</html>